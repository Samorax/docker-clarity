<clr-modal [(clrModalOpen)]="show" clrModalSize="lg" [clrModalStaticBackdrop]="true" [clrModalClosable]="false">
    <h3 class="modal-title" clrModalTitle>Add New Product</h3>
    <div class="modal-body" clrModalContent>
      <form clrForm clrLayout="vertical"  (ngSubmit)="onSubmit();" [formGroup]="productForm">
        <div>
          <label class='clr-control-label clr-required-mark'>Photo</label>
          <img class="img img-thumbnail img-responsive" src="https://placeholder.co/420x320" (click)="handleClickEvent()" id="img-thumb" style="width:200px;"/>
          <input id="fileElem" formControlName="photo" style="display:none" #file type="file" (change)="onfileLoaded(file.files)" class="form-control" required>
          <clr-control-helper>Click or tap the palceholder to upload photo</clr-control-helper>
          
        </div>
<div class="clr-row">
  <div class="clr-col">
    <clr-input-container>
      <label class="clr-control-label clr-required-mark" >Name</label>
      <input clrInput type="text" formControlName="productName" required/>
      <clr-control-error *clrIfError="'required'">This field is required</clr-control-error>
    </clr-input-container>
  </div>
  <div class="clr-col">
    <clr-input-container>
      <label class="clr-control-label clr-required-mark">Price {{ 0 | currency:currencySymbol}}</label>
      <input clrInput type="text" formControlName="productPrice" required/>
      <clr-control-error *clrIfError="'required'">This field is required</clr-control-error>
    </clr-input-container>

  </div>
</div>
<div class="clr-row">
  <div class="clr-col">
    <clr-select-container>
      <label class="clr-control-label clr-required-mark">Select a Category</label>
      <select  clrSelect formControlName="productCategory" (change)="monitorValue()" required>
        <option *ngFor="let cat of categories" value="{{cat}}">{{cat}}</option>
        <option value="New">New Category</option>
      </select>
      <clr-control-error *clrIfError="'required'">This field is required</clr-control-error>
    </clr-select-container>
    <div *ngIf="addNewCategory">
      <clr-input-container >
        <label>Add New Category</label>
        <input clrInput  type="text"  #kat/>
      </clr-input-container>
      
      <button class="btn btn-primary" (click)="addCategory(kat.value)">Add</button>
    </div>
  </div>
  <div class="clr-col">
    <clr-input-container>
      <label class="clr-control-label" >Code</label>
      <input clrInput type="text" formControlName="productCode" />
    </clr-input-container>
   
  </div>
</div>
<div class="clr-row">
  <div class="clr-col">
    <clr-input-container>
      <label class="clr-control-label clr-required-mark">Loyalty Point (Pts)</label>
      <input clrInput type="text"formControlName="productLoyaltyPoints" placeholder="20"/>
    </clr-input-container>
  </div>
  <div class="clr-col">
    <clr-combobox-container>
      <label class="clr-control-label">Allergens</label>
      <clr-combobox formControlName="productAllergens" clrMulti="true">
        <ng-container *clrOptionSelected="let selected">
          {{ selected }}
        </ng-container>
        <clr-options>
          <clr-option *clrOptionItems="let allergen of allergens; field: 'name'" [clrValue]="allergen">
            {{allergen}}
          </clr-option>
        </clr-options>
      </clr-combobox>
    </clr-combobox-container>
  </div>
</div>
       
<div class="clr-row">
  <clr-textarea-container>
    <label class="clr-control-label clr-required-mark">Description</label>
    <textarea clrTextarea formControlName="productDescription" cols="50" rows="5" required></textarea>
    <clr-control-error *clrIfError="'required'">This field is required</clr-control-error>
  </clr-textarea-container>
</div>
       
        <div class="modal-footer" clrModalActions>
          <button class="btn btn-outline" (click)="show=false" >Cancel</button>
          <button class="btn btn-primary" [clrLoading]="submitLoadingState"  [disabled]="!productForm.valid">OK</button>
        </div>
      </form>
    </div>
  </clr-modal>
